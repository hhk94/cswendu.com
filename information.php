<?php
$title = '考研资讯'; // 模块页标题，每个页面自定义
$page_path = dirname(__FILE__); // 项目index的根目录
include $page_path.'/common/head.php';
include $page_path.'/common/nav.php';
?>
<style>
	
	
	
	
	
	
	
	
	
	
	
</style>
<!--开始-模块页内容-->
<div class="view-section clear information" id="view-main">
<!--面包屑导航-->
    <div class="nav-top-div select-none border-bottom-0">
        <div class="width-1200-center">
            <div class="dir-div roll-txt">
                <i class="fa fa-home"></i>
                <a class="dir-a" href="<?=$file_url?>home.php?route=nav&nav=home" target="_self" title="文都首页">文都首页</a>
                <i class="fa fa-angle-right dir-fa"></i>
                <a class="dir-a" href="<?=$file_url?>information.php?route=nav&nav=information" target="_self" title="考研资讯">考研资讯</a>
            </div>
        </div>
    </div>
    <section class="center">
		<div class="width-1200-center">
			<div class="center-body">
				<h1 class="title">考研资讯
					
				</h1>
				<div class="news-type-body">
					<div class="news-type-item selected " data-teacher_class_id=''>全部</div>
					
					
				</div>
				<div class="list list-information">
					<a class="list-item" href="" target="_blank">
						<div class="img"><img src="" alt=""></div>
						<div class="word">
							<h1>教育部召开视频会议部署2020年全国硕士研究生招生考</h1>
							<h3>2020年全国硕士研究生招生考试将于2019年12月21日至23日举行。近日，教育部会同国家教育统一考试工作部际联席会议制度成员单位，召开...</h3>
							<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-circle-o-notch" aria-hidden="true"></i>2019-10-*31</p>
						</div>
					</a>
					<a class="list-item">
						<div class="img"><img src="" alt=""></div>
						<div class="word">
							<h1>教育部召开视频会议部署2020年全国硕士研究生招生考</h1>
							<h3>2020年全国硕士研究生招生考试将于2019年12月21日至23日举行。近日，教育部会同国家教育统一考试工作部际联席会议制度成员单位，召开...</h3>
							<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-circle-o-notch" aria-hidden="true"></i>2019-10-*31</p>
						</div>
					</a>
					<a class="list-item">
						<div class="img"><img src="" alt=""></div>
						<div class="word">
							<h1>教育部召开视频会议部署2020年全国硕士研究生招生考</h1>
							<h3>2020年全国硕士研究生招生考试将于2019年12月21日至23日举行。近日，教育部会同国家教育统一考试工作部际联席会议制度成员单位，召开...</h3>
							<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-circle-o-notch" aria-hidden="true"></i>2019-10-*31</p>
						</div>
					</a>
					<a class="list-item">
						<div class="img"><img src="" alt=""></div>
						<div class="word">
							<h1>教育部召开视频会议部署2020年全国硕士研究生招生考</h1>
							<h3>2020年全国硕士研究生招生考试将于2019年12月21日至23日举行。近日，教育部会同国家教育统一考试工作部际联席会议制度成员单位，召开...</h3>
							<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-circle-o-notch" aria-hidden="true"></i>2019-10-*31</p>
						</div>
					</a>
					<a class="list-item">
						<div class="img"><img src="" alt=""></div>
						<div class="word">
							<h1>教育部召开视频会议部署2020年全国硕士研究生招生考</h1>
							<h3>2020年全国硕士研究生招生考试将于2019年12月21日至23日举行。近日，教育部会同国家教育统一考试工作部际联席会议制度成员单位，召开...</h3>
							<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-circle-o-notch" aria-hidden="true"></i>2019-10-*31</p>
						</div>
					</a>
					<a class="list-item">
						<div class="img"><img src="" alt=""></div>
						<div class="word">
							<h1>教育部召开视频会议部署2020年全国硕士研究生招生考</h1>
							<h3>2020年全国硕士研究生招生考试将于2019年12月21日至23日举行。近日，教育部会同国家教育统一考试工作部际联席会议制度成员单位，召开...</h3>
							<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-circle-o-notch" aria-hidden="true"></i>2019-10-*31</p>
						</div>
					</a>
					<a class="list-item">
						<div class="img"><img src="" alt=""></div>
						<div class="word">
							<h1>教育部召开视频会议部署2020年全国硕士研究生招生考</h1>
							<h3>2020年全国硕士研究生招生考试将于2019年12月21日至23日举行。近日，教育部会同国家教育统一考试工作部际联席会议制度成员单位，召开...</h3>
							<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-circle-o-notch" aria-hidden="true"></i>2019-10-*31</p>
						</div>
					</a>
				</div>
				
				<div class="information-page-body">
					<div class="information-page" id="information-page"></div>
				</div>
			</div>
			<div class="right">
				<div class="right-top">
					
				</div>
				<div class="hot-recommend">
					<h1>热点推荐</h1>
					<div class="list hot-news-list">
						<a href="./kaoyankecheng.php?route=nav&nav=kaoyankecheng" target="_blank" title="考研资讯" class="WordJustOneLine">研招统考预报名5个问题请关注</a>
						<a href="./kaoyankecheng.php?route=nav&nav=kaoyankecheng" target="_blank" title="考研资讯" class="WordJustOneLine">研招统考预报名5个问题请关注</a>
						<a href="./kaoyankecheng.php?route=nav&nav=kaoyankecheng" target="_blank" title="考研资讯" class="WordJustOneLine">研招统考预报名5个问题请关注</a>
						<a href="./kaoyankecheng.php?route=nav&nav=kaoyankecheng" target="_blank" title="考研资讯" class="WordJustOneLine">研招统考预报名5个问题请关注</a>
					</div>
				</div>
				<div class="hot-communication">
					<h1>研友交流</h1>
					<div class="list">
						<a title="考研资讯" class="WordJustOneLine information-num">湖南考研学习群 :<span>603615074</span></a>
						<a title="考研资讯" class="WordJustOneLine information-num">农大21考研学员群:<span>897178755</span></a>
						<a title="考研资讯" class="WordJustOneLine information-num">2021林科大官方群:<span> 1023382939</span></a>
						<a title="考研资讯" class="WordJustOneLine information-num">湖师大2021考研群:<span>1005752702</span></a>
						<div><img src="<?=$file_url?>/static/img/information-code.png" data-img_name="information-code.png" alt="文都考研二维码" title="文都考研二维码"/></div>
					</div>
				</div>
			</div>
			
		</div>
		
	</section>


</div>
<!--结束-模块页内容-->


<!--开始-页面js-->
<script>

</script>
<script>
    // 页面数据入口，如有动态数据渲染，请以此函数为调用作为开始
	var [limit,pages] = [7,1];
	var news_class_id = "";
    function page_data_init(){
        console_log("开始渲染数据");
	
		
		// getBanner()
		getNewsList(limit,pages,news_class_id)
		geAllArea()
		getHot()
		getClass()
    }
	function getClass(){
		let params = {
			method:'POST',
			url: "<?=$api_url?>"+"app/list_news_class" ,
			data :{
				app_class:'web',
				user_token:window.token,
				news_class_id:'all',		
			},
			successfn:function(res){
				let jsonRes = $.parseJSON( res );
				console_log(jsonRes)
				let content = jsonRes.content
				newsType(content)
			}
		}
		all.sendAjax(params)
	}
	//新增分类
	function newsType(content){
		$.isArray(content)&&content.forEach((item,index)=>{
			let html = `<div class="news-type-item" data-news_class_id='${item.news_class_id}'>${item.class_name}</div>`
			$('.news-type-body').append(html)
		})
	}
	$(document).on('click', '.news-type-item', function() {
		news_class_id = all.getItemDataAttr($(this),'news_class_id')
		$(this).addClass('selected').siblings().removeClass('selected')
		// console.log(teacher_class_id )
		getNewsList(limit,pages,news_class_id);
	});
	
	//获取分页数据
	function getNewsList(limit,pages,news_class_id){
		let params = {
			method:'POST',
			url: "<?=$api_url?>"+"app/list_news" ,
			data :{
				app_class:'web',
				user_token:window.token,
				news_class_id:news_class_id,
				page:pages,
				limit:limit
			},
			successfn:function(res){
				let jsonRes = $.parseJSON( res );
				console_log(jsonRes)
				let content = jsonRes.content
				itemAdd(content)
				$("#information-page").sPage({
				    page:jsonRes.paging.page,//当前页码
				    pageSize:jsonRes.paging.limit,//每页显示多少条数据，默认10条
				    total:jsonRes.paging.total,//数据总条数,后台返回
				    backFun:function(page){
				        //点击分页按钮回调函数，返回当前页码
						
				        getNewsList(limit,page,news_class_id);
				    }
				});
			}
			
		}
		all.sendAjax(params)
	}
	function itemAdd(content){
		//列表清空
		$('.list-information').html('')
		$.isArray(content)&&content.forEach((item,index)=>{
			
			let times = all.getTime(item.create_time)
			// console.log(times)
			let html = `<a class="list-item" href="<?=$file_url?>detail/detail-information.php?route=nav&nav=kaoyanInformation&news_info_id=${item.news_info_id}" target="_blank">
				<div class="img"><img src="${item.cover}" alt=""></div>
				<div class="word">
					<h1>${item.title}</h1>
					<h3>${item.summary}</h3>
					<p><i class="fa fa-eye" aria-hidden="true"></i>120 <i class="fa fa-clock-o" aria-hidden="true"></i>${times[0]}-${times[1]}-${times[2]}</p>
				</div>
			</a>`
			$('.list-information').append(html)
		})
		
		
	}

//获取热门新闻
	function getHot(){
		let params = {
			method:'POST',
			url: "<?=$api_url?>"+"app/hot_news" ,
			data :{
				app_class:'web',
				user_token:window.token,
				page:1,
				limit:6
			},
			successfn:function(res){
				let jsonRes = $.parseJSON( res );
				console_log(jsonRes)
				let content = jsonRes.content
				getHotAddHot(content)
				
			}
			
		}
		all.sendAjax(params)
	}
	//热门新闻插入
	function getHotAddHot(content){
		$('.hot-news-list').html('')
		$.isArray(content)&&content.forEach((item,index)=>{
			let html = `<a href="<?=$file_url?>detail/detail-information.php?route=nav&nav=kaoyanInformation&
			news_info_id=${item.news_info_id}" target="_blank" title="考研资讯" class="WordJustOneLine">${item.title}</a>`
			
			 $('.hot-news-list').append(html)
			
		})
	}
</script>
<!--结束-页面js-->


<?php
include $page_path.'/common/must.php';
include $page_path.'/common/foot.php';
?>

